

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Cover Template for Bootstrap</title>
    <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/cover/">

    <!-- Bootstrap core CSS -->
    <link href="bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="cover.css" rel="stylesheet">
  </head>

  <body>

    <div class="site-wrapper">

      <div class="site-wrapper-inner">

        <div class="cover-container">

          <div class="masthead clearfix">
            <div class="inner">
              <h3 class="masthead-brand">Where's the News?</h3>
              </nav>
            </div>
          </div>


        </div>

      </div>
      <br>
      <br>
      <br>
      <br>
      <br>
  <div id="map" style="position: relative; width: 80%; height: 80%;"></div>

    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
      <script src="datamaps.js"></script>
      <script>

          //example data copied from server
          let series = [
              ["BLR",75],["BLZ",43],["RUS",50],["RWA",88],["SRB",21],["TLS",43],
              ["REU",21],["TKM",19],["TJK",60],["ROU",4],["TKL",44],["GNB",38],
              ["GUM",67],["GTM",2],["SGS",95],["GRC",60],["GNQ",57],["GLP",53],
              ["JPN",59],["GUY",24],["GGY",4],["GUF",21],["GEO",42],["GRD",65],
              ["GBR",14],["GAB",47],["SLV",15],["GIN",19],["GMB",63],["GRL",56],
              ["ERI",57],["MNE",93],["MDA",39],["MDG",71],["MAF",16],["MAR",8],
              ["MCO",25],["UZB",81],["MMR",21],["MLI",95],["MAC",33],["MNG",93],
              ["MHL",15],["MKD",52],["MUS",19],["MLT",69],["MWI",37],["MDV",44],
              ["MTQ",13],["MNP",21],["MSR",89],["MRT",20],["IMN",72],["UGA",59],
              ["TZA",62],["MYS",75],["MEX",80],["ISR",77],["FRA",54],["IOT",56],
              ["SHN",91],["FIN",51],["FJI",22],["FLK",4],["FSM",69],["FRO",70],
              ["NIC",66],["NLD",53],["NOR",7],["NAM",63],["VUT",15],["NCL",66],
              ["NER",34],["NFK",33],["NGA",45],["NZL",96],["NPL",21],["NRU",13],
              ["NIU",6],["COK",19],["XKX",32],["CIV",27],["CHE",65],["COL",64],
              ["CHN",16],["CMR",70],["CHL",15],["CCK",85],["CAN",76],["COG",20],
              ["CAF",93],["COD",36],["CZE",77],["CYP",65],["CXR",14],["CRI",31],
              ["CUW",67],["CPV",63],["CUB",40],["SWZ",58],["SYR",96],["SXM",31]];

              //expected arrangment: {"countryName": {"fillColor": #colorcode, "numberOfWhatever": num}}
              let dataSet = {}

              let values = []

              //fetching values to determine min/max
              for (let item of series){
                values.push(item[1])
              }

              var minValue = Math.min(...values)
              var maxValue = Math.max(...values)

              //using d3 scale module to build a scale between dark green (light) and dark red (heavy)
              var colorScale = d3.scale.linear()
                .domain([minValue, maxValue])
                .range(["#FFFFB2","#BD0026"])

              var halfWay = Math.round(maxValue / minValue)
              var two = Math.round(halfWay / minValue)
              var four = Math.round((maxValue - minValue) * .75)

              //fetch country/value and popluate the dataSet
              var fills = {}
              for (let item of series){
                let country = item[0]
                let val = item[1]

                dataSet[country] = {"fillColor": colorScale(val), "numberOfWhatever": val}


              }
              //generate a map
              var map =  new Datamap({
                element: document.getElementById("map"),
                responisve : true,
                fills: {defaultFill: "white", minValue: "#FFFFB2", two: "#EFC08F", halfWay: "#DE806C", four: "#CE4049", maxValue: "BD0026"},
                data: dataSet,
                projection: "mercator",
                geographyConfig: {
                  borderColor: '#444',
                  borderWidth: 0.5,
                  popupTemplate: function(geo, data){
                      return ['<div class="hoverinfo"><strong>',
                              'Number of articles in ' + geo.properties.name,
                              ': ' + data.numberOfWhatever,
                              '</strong></div>'].join('');            
                  }
                },
              done: function(datamap) {
                  datamap.svg.selectAll('.datamaps-subunit').on('click', function(geography) {
                    //triggered by clicking on a country
                      alert(geography.properties.name);
                  });
                }
              })
              map.legend({labels: {minValue: minValue, two: two, halfWay: halfWay,four: four, maxValue: maxValue}})

          window.addEventListener('resize', function() {
              map.resize();
          });



      </script>
  </body>
</html>
